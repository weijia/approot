{% extends "base.html" %}
{% load tagging_tags %}
{% block container %}
{% if close_flag %}
<script>
window.close();
</script>
<link href="/static/tagging.css" type="text/css" rel="stylesheet" />

{% else %}
<form action="." method="POST">
{% csrf_token %}
<ul>
{% for url_with_tags in urls_with_tags %}
    <li>
        <input name="selected_url" type="checkbox" value="{{ url_with_tags.url }}" checked="checked">
        </input><span stype="padding:5px">{{ url_with_tags.url }}</span>
        tags:
        {% for tag in url_with_tags.tags %}
            {{tag.name}}
        {% endfor %}
    </li>
{% endfor %}
{% if new_url_input %}
    <li>
        <input name="selected_url"></input>
    </li>
{%endif%}
</ul>
<div>
{% tag_cloud_for_model objsys.UfsObj as objsys_tags with steps=9 min_count=0 distribution=log %}
{%for tag in objsys_tags%}
<span class="tag-span" style="font-size:1.{{tag.font_size}}em;" tag="{{tag.name}}">{{tag.name}}({{tag.count}})</span>
{% endfor %}
</div>
<input type="text" name="tags" id="tag-input">
<input type="submit" value="submit"/>
<link href="/static/jquery-ui-1.10.2/themes/base/minified/jquery-ui.min.css" type="text/css" rel="stylesheet" />
<SCRIPT type="text/javascript" src="/static/jquery-1.9.1.min.js"></SCRIPT>
<SCRIPT type="text/javascript" src="/static/jquery-migrate-1.1.1.min.js"></SCRIPT>
<SCRIPT type="text/javascript" src="/static/jquery-ui-1.10.2/ui/minified/jquery-ui.min.js"></SCRIPT>
<SCRIPT type="text/javascript" src="/static/csrf.js"></SCRIPT>
<script>
$(document).ready(function() {
    $( ".tag-span" ).click(function(e){
        $( "#tag-input" ).val($( "#tag-input" ).val()+" "+$(e.target).attr("tag"));
    });
});
</script>
</form>
{% endif %}
{% endblock %}